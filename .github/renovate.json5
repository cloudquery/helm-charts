{
  extends: ["github>cloudquery/.github//.github/renovate-default.json5"],
  schedule: ["at any time"],
  regexManagers: [
    {
      fileMatch: ["^charts/cloudquery/Chart.yaml$"],
      matchStrings: ['appVersion: "(?<currentValue>.*)"'],
      depNameTemplate: "cloudquery/cloudquery",
      datasourceTemplate: "github-releases",
      versioningTemplate: "loose",
    },
  ],
  packageRules: [
    {
      matchPackageNames: ["cloudquery/cloudquery"],
      extractVersion: "^v(?<version>.+)\\.\\d$",
    },
  ],
  postUpgradeTasks: {
    // Bump patch version of chart when updating the CloudQuery CLI version
    commands: ["grep '^version' charts/cloudquery/Chart.yaml | cut -d" " -f2 | awk -F. '{$NF = $NF + 1;} 1' | sed 's/ /./g'"],
    fileFilters: ["charts/cloudquery/Chart.yaml"],
    executionMode: "branch",
  },
}
